var MultiTouch;!function(t){var e=function(){function t(){var t=this;this.handleTouchStart=function(e){var o=t.findParentHost(e.target);if(null!==o)for(var n=0;n<e.changedTouches.length;n++)console.log("touch id "+e.changedTouches.item(n).identifier+" start on "+o.id),o.capturedTouches.push({id:e.changedTouches.item(n).identifier,start:Date.now()})},this.handleTouchEnd=function(e){console.log("touch end");for(var o=0;o<e.changedTouches.length;o++){var n=e.changedTouches.item(o).identifier,u=t.removeTouch(n);if(console.log("touch end on "+u.host.id),null===u)return void console.log("Touch id "+n+" not found.");if(Date.now()-u.thing.start<=500){var r=document.createEvent("CustomEvent");r.initEvent("Tap",!0,!0),e.target.dispatchEvent(r),console.log("dispatched tap")}}},this.findParentHost=function(t){for(var e,o=t;o!==document&&null===(e=o.attributes.getNamedItem("data-mthost"));)o=o.parentNode;return null===e?null:o},this.findTouch=function(e){for(var o=0;o<t.AllHosts.length;o++)for(var n=t.AllHosts.item(o),u=0;u<n.capturedTouches.length;u++)if(n.capturedTouches[u].id===e)return console.log("Touch id "+e+" found."),{host:n,thing:n.capturedTouches[u]};return null},this.removeTouch=function(e){for(var o=0;o<t.AllHosts.length;o++)for(var n=t.AllHosts.item(o),u=0;u<n.capturedTouches.length;u++)if(n.capturedTouches[u].id===e){var r=n.capturedTouches.slice(u,1)[0];return console.log("Touch id "+e+" removed."),{host:n,thing:r}}return null},this.AllHosts=document.querySelectorAll("[data-mthost]");for(var e=0;e<this.AllHosts.length;e++){var o=this.AllHosts.item(e);o.capturedTouches=[],""!==o.id&&null!==o.id||(o.id="host-"+e)}document.addEventListener("touchstart",function(e){return t.handleTouchStart(e)}),document.addEventListener("touchend",function(e){return t.handleTouchEnd(e)})}return t}();t.Manager=e}(MultiTouch||(MultiTouch={})),document.touchManager=new MultiTouch.Manager,document.addEventListener("Tap",function(t){console.log("Tap event on "+t.target)});